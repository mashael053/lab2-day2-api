<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register-Page</title>
    <link rel="stylesheet" href="style-registration.css">
</head>
<body>
     <h1></h1>
     <div class="container">
      <div class="contact">
          <img src="img.png" alt="" srcset="">
      </div>
    <form id="registerForm">
      <div class="SignUp">
        <h1 class="title-page">Sign Up</h1>
      <div class="box"> 
        <input type="text" id="username" name="username" required minlength="5" placeholder="user name"><br><br></div>
        <div class="box"> 
        <input type="email" id="email" name="email" required placeholder="Email"><br><br></div>
        <div class="box"> 
        <input type="password" id="password" name="password" required minlength="8" placeholder="password"><br><br></div>
        <input class="but" id="but" type="submit" value="Register">
    </form>

    <script>
        document.getElementById("registerForm").addEventListener("submit", function(event) {
            event.preventDefault(); 
            var username = document.getElementById("username").value;
            if (username.length < 5) {
                alert("اسم المستخدم يجب أن يكون أكثر من 5 حروف");
                return;
            }
            var email = document.getElementById("email").value;
            if (!isValidEmail(email)) {
                alert("البريد الإلكتروني غير صالح");
                return;
            }
            var password = document.getElementById("password").value;
            if (password.length < 8) {
                alert("كلمة السر يجب أن تكون أكثر من 8 أحرف");
                return;
            }
            var formData = new FormData(document.getElementById("registerForm"));
            fetch("https://655270245c69a779032a08a1.mockapi.io/api/signup/users", {
                method: "POST",
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert("تم التسجيل بنجاح");
                    window.location.href = "index.html"; 
                    window.location.href = "sinIn.html"; 
                } else {
                    alert("حدث خطأ أثناء التسجيل");
                }
            })
            .catch(error => {
                console.error("حدث خطأ أثناء إرسال البيانات:", error);
            });
        });
        function isValidEmail(email) {
            var emailRegex = /\S+@\S+\.\S+/;
            return emailRegex.test(email);
        }

</script>
</body>
</html>